<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZHARK ‚Äî Convite Limitado</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    @font-face {
      font-family: 'Wellfleet-Regular';
      src: url('https://fonts.gstatic.com/s/wellfleet/v18/nuF7D_LfQJb3VYgX6eyT42aLDhO2HA.woff2') format('woff2');
    }
    
    :root {
      --primary-black: #000000;
      --accent-gold: #C9A93A;
      --pure-white: #FFFFFF;
      --warning-red: #8B0000;
      --expired-red: #450000;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Wellfleet-Regular', 'Cinzel', serif;
      background: var(--pure-white);
      color: var(--primary-black);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      transition: background 1s ease;
    }
    
    body.expired {
      background: #0A0A0A;
      animation: fadeToBlack 2s ease;
    }
    
    /* Container principal */
    .invite-container {
      max-width: 480px;
      padding: 50px 40px;
      position: relative;
      z-index: 2;
      text-align: center;
      border: 3px solid var(--primary-black);
      margin: 20px;
      transition: all 1s ease;
    }
    
    body.expired .invite-container {
      opacity: 0;
      transform: scale(0.9);
      pointer-events: none;
    }
    
    /* Logo */
    .zhark-logo {
      font-family: 'Wellfleet-Regular', 'Cinzel', serif;
      font-size: 4rem;
      letter-spacing: 15px;
      color: var(--primary-black);
      margin-bottom: 10px;
      text-transform: uppercase;
      transition: all 1s ease;
    }
    
    body.expired .zhark-logo {
      color: #333;
    }
    
    /* Linha divis√≥ria */
    .divider {
      width: 80px;
      height: 2px;
      background: var(--accent-gold);
      margin: 25px auto;
      transition: all 1s ease;
    }
    
    body.expired .divider {
      background: #333;
    }
    
    /* Mensagem principal */
    .main-message {
      font-size: 1.3rem;
      line-height: 1.5;
      margin: 30px 0;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 1s ease;
    }
    
    body.expired .main-message {
      color: #333;
    }
    
    /* Timer principal */
    .main-timer {
      font-size: 3.5rem;
      color: var(--warning-red);
      font-weight: bold;
      margin: 30px 0;
      font-family: monospace;
      letter-spacing: 5px;
      animation: pulse 1s infinite;
    }
    
    /* Selo */
    .seal {
      border: 2px solid var(--primary-black);
      padding: 12px 25px;
      display: inline-block;
      margin: 20px 0;
      font-size: 0.9rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      transition: all 1s ease;
    }
    
    body.expired .seal {
      border-color: #333;
      color: #333;
    }
    
    /* Bot√£o */
    .accept-btn {
      background: var(--primary-black);
      color: var(--pure-white);
      border: none;
      padding: 22px 50px;
      font-size: 1.1rem;
      font-weight: bold;
      letter-spacing: 3px;
      cursor: pointer;
      margin: 30px 0 15px;
      text-transform: uppercase;
      font-family: inherit;
      width: 100%;
      transition: all 0.3s;
    }
    
    .accept-btn:hover {
      background: var(--accent-gold);
      color: var(--primary-black);
    }
    
    .small-text {
      font-size: 0.8rem;
      color: rgba(0, 0, 0, 0.5);
      letter-spacing: 1px;
      margin-top: 10px;
      transition: all 1s ease;
    }
    
    body.expired .small-text {
      color: #444;
    }
    
    /* Footer */
    .footer {
      margin-top: 40px;
      font-size: 0.7rem;
      color: rgba(0, 0, 0, 0.4);
      letter-spacing: 2px;
      text-transform: uppercase;
      transition: all 1s ease;
    }
    
    body.expired .footer {
      color: #444;
    }
    
    /* Timer flutuante */
    .timer-float {
      position: fixed;
      top: 15px;
      right: 15px;
      background: var(--warning-red);
      color: white;
      padding: 10px 15px;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 4px;
      font-family: monospace;
      z-index: 1000;
      box-shadow: 0 3px 10px rgba(178, 34, 34, 0.3);
      transition: all 1s ease;
    }
    
    body.expired .timer-float {
      opacity: 0;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.98);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-box {
      background: var(--pure-white);
      border: 3px solid var(--primary-black);
      padding: 40px 30px;
      max-width: 400px;
      text-align: center;
      margin: 20px;
    }
    
    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      color: var(--primary-black);
      cursor: pointer;
    }
    
    .modal-title {
      font-size: 1.4rem;
      margin-bottom: 25px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    
    .access-option {
      border: 1px solid rgba(0, 0, 0, 0.1);
      padding: 18px;
      margin: 12px 0;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    
    .access-option:hover {
      border-color: var(--primary-black);
    }
    
    .option-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    /* TELA DE EXPIRADO - NOVA VERS√ÉO */
    .expired-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0A0A0A 0%, #1A0000 100%);
      z-index: 3000;
      justify-content: center;
      align-items: center;
      color: #8B0000;
      text-align: center;
      padding: 20px;
      opacity: 0;
      animation: fadeInExpired 2s ease forwards;
    }
    
    .expired-content {
      max-width: 500px;
      padding: 50px 40px;
      background: rgba(10, 0, 0, 0.7);
      border: 1px solid rgba(139, 0, 0, 0.3);
      border-radius: 2px;
      position: relative;
      overflow: hidden;
    }
    
    .expired-content::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--warning-red), transparent);
    }
    
    .expired-content::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--warning-red), transparent);
    }
    
    .expired-icon {
      font-size: 4rem;
      margin-bottom: 30px;
      animation: fadeInOut 3s infinite;
      color: var(--warning-red);
    }
    
    .expired-title {
      font-size: 2.2rem;
      color: var(--warning-red);
      margin-bottom: 25px;
      text-transform: uppercase;
      letter-spacing: 4px;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(139, 0, 0, 0.3);
    }
    
    .expired-subtitle {
      font-size: 1rem;
      letter-spacing: 3px;
      color: rgba(255, 255, 255, 0.4);
      margin-bottom: 40px;
      text-transform: uppercase;
    }
    
    .expired-message {
      font-size: 1.1rem;
      line-height: 1.8;
      margin: 30px 0;
      color: rgba(255, 255, 255, 0.7);
      padding: 0 20px;
    }
    
    .expired-quote {
      font-style: italic;
      padding: 25px;
      margin: 30px 0;
      border-left: 2px solid rgba(139, 0, 0, 0.5);
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.95rem;
      text-align: left;
      line-height: 1.6;
    }
    
    .expired-footer {
      margin-top: 40px;
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.3);
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    
    .permanent-block {
      display: inline-block;
      padding: 8px 20px;
      background: rgba(139, 0, 0, 0.1);
      border: 1px solid rgba(139, 0, 0, 0.3);
      font-size: 0.8rem;
      letter-spacing: 2px;
      margin-top: 20px;
      color: rgba(255, 255, 255, 0.5);
    }
    
    /* Anima√ß√µes */
    @keyframes fadeToBlack {
      0% { background: var(--pure-white); }
      100% { background: #0A0A0A; }
    }
    
    @keyframes fadeInExpired {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    @keyframes fadeInOut {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.1); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }
    
    @keyframes crumble {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(0.95); opacity: 0.3; }
    }
    
    /* Responsivo */
    @media (max-width: 768px) {
      .invite-container {
        padding: 40px 20px;
        margin: 15px;
      }
      
      .zhark-logo {
        font-size: 3rem;
        letter-spacing: 10px;
      }
      
      .main-timer {
        font-size: 2.5rem;
      }
      
      .accept-btn {
        padding: 20px 40px;
        font-size: 1rem;
      }
      
      .timer-float {
        top: 10px;
        right: 10px;
        font-size: 1rem;
        padding: 8px 12px;
      }
      
      .expired-title {
        font-size: 1.8rem;
      }
      
      .expired-content {
        padding: 40px 20px;
        margin: 15px;
      }
    }
    
    @media (max-width: 480px) {
      .zhark-logo {
        font-size: 2.5rem;
        letter-spacing: 8px;
      }
      
      .main-timer {
        font-size: 2rem;
      }
      
      .expired-title {
        font-size: 1.5rem;
        letter-spacing: 3px;
      }
      
      .expired-message {
        font-size: 1rem;
        padding: 0 10px;
      }
    }
  </style>
</head>

<body>
  <!-- Timer flutuante -->
  <div class="timer-float" id="floatTimer">10:00</div>
  
  <!-- Convite -->
  <div class="invite-container">
    <div class="zhark-logo">ZHARK</div>
    
    <div class="divider"></div>
    
    <div class="main-message">
      SEU CONVITE CHEGOU
    </div>
    
    <div class="seal">
      ACESSO CONCEDIDO
    </div>
    
    <div class="main-timer" id="mainTimer">
      10:00
    </div>
    
    <div class="main-message">
      VOC√ä AGORA PERTENCE AOS
      <br>
      <span style="color: var(--warning-red); font-size: 1.4rem;">0,7% SELECIONADOS</span>
    </div>
    
    <button class="accept-btn" id="acceptBtn" onclick="showAccessModal()">
      ACEITAR
    </button>
    
    <div class="small-text">
      Este convite expira em <span id="smallTimer">10:00</span>
    </div>
    
    <div class="footer">
      ZHARK SOCIETY ¬© 2026
    </div>
  </div>
  
  <!-- Modal de acesso -->
  <div class="modal" id="accessModal">
    <div class="modal-box">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <div class="modal-title">COMO VOC√ä PREFERE ENTRAR?</div>
      
      <div class="access-option" onclick="proceedAccess('android')">
        <div class="option-title">ANDROID</div>
        <div>Baixar aplicativo ZHARK</div>
      </div>
      
      <div class="access-option" onclick="proceedAccess('ios')">
        <div class="option-title">IPHONE</div>
        <div>Abrir na App Store</div>
      </div>
      
      <div class="access-option" onclick="proceedAccess('desktop')">
        <div class="option-title">OUTRO DISPOSITIVO</div>
        <div>Receber instru√ß√µes</div>
      </div>
      
      <div style="margin-top: 20px; font-size: 0.9rem; color: var(--warning-red);">
        ‚è∞ Tempo restante: <span id="modalTimer">09:45</span>
      </div>
    </div>
  </div>
  
  <!-- NOVA TELA DE EXPIRADO -->
  <div class="expired-overlay" id="expiredScreen">
    <div class="expired-content">
      <div class="expired-icon">‚úó</div>
      <div class="expired-title">OPORTUNIDADE PERDIDA</div>
      <div class="expired-subtitle">CONVITE ZHARK EXPIRADO</div>
      
      <div class="expired-message">
        O tempo para aceitar este convite terminou.
        <br>
        Voc√™ hesitou quando a oportunidade bateu √† sua porta.
      </div>
      
      <div class="expired-quote">
        "Os 0,7% n√£o duvidam. N√£o hesitam. Agem no momento exato. 
        A escassez √© o que define o valor. E voc√™ deixou o valor escapar."
      </div>
      
      <div class="expired-message">
        Este link n√£o funcionar√° novamente.
        <br>
        A √∫nica maneira de entrar na ZHARK agora √© atrav√©s de um novo convite.
      </div>
      
      <div class="permanent-block">
        ACESSO PERMANENTEMENTE BLOQUEADO
      </div>
      
      <div class="expired-footer">
        ZHARK SOCIETY ¬© 2026 ‚Äî EXCLUSIVIDADE SEM SEGUNDAS CHANCES
      </div>
    </div>
  </div>
  
  <script>
    // Configura√ß√µes
    const TOTAL_TIME = 600; // 10 minutos
    let timeLeft = TOTAL_TIME;
    let timerInterval = null;
    let expired = false;
    let hiddenStartTime = null;
    let usedLink = false;
    
    // ID √∫nico do convite (simula identifica√ß√£o √∫nica por link)
    const inviteId = generateInviteId();
    
    // Inicializar
    function init() {
      // Verificar se este link j√° foi usado/expirou permanentemente
      const permanentBlock = localStorage.getItem('zhark_permanent_block_' + inviteId);
      if (permanentBlock === 'true') {
        showExpiredImmediately();
        return;
      }
      
      // Verificar se j√° aceitou antes
      const accepted = localStorage.getItem('zhark_accepted_' + inviteId);
      if (accepted === 'true') {
        showAlreadyAccepted();
        return;
      }
      
      // Verificar tempo restante
      const savedEndTime = localStorage.getItem('zhark_end_time_' + inviteId);
      const savedStartTime = localStorage.getItem('zhark_start_time_' + inviteId);
      
      if (savedEndTime && savedStartTime) {
        const now = Date.now();
        const endTime = parseInt(savedEndTime);
        
        if (now >= endTime) {
          // Tempo expirou - bloquear permanentemente
          localStorage.setItem('zhark_permanent_block_' + inviteId, 'true');
          showExpired();
          return;
        } else {
          timeLeft = Math.floor((endTime - now) / 1000);
        }
      } else {
        // Novo convite
        const endTime = Date.now() + (TOTAL_TIME * 1000);
        localStorage.setItem('zhark_end_time_' + inviteId, endTime.toString());
        localStorage.setItem('zhark_start_time_' + inviteId, Date.now().toString());
      }
      
      // Iniciar timer
      startTimer();
      
      // Configurar detec√ß√£o de p√°gina oculta
      document.addEventListener('visibilitychange', handleVisibilityChange);
      
      // Prevenir sa√≠da
      window.addEventListener('beforeunload', handleBeforeUnload);
    }
    
    // Gerar ID √∫nico para o convite
    function generateInviteId() {
      // Usar parte do URL ou gerar um hash baseado no dom√≠nio
      const path = window.location.pathname;
      if (path && path.length > 1) {
        return btoa(path).substring(0, 16);
      }
      return btoa(window.location.href).substring(0, 16);
    }
    
    // Iniciar timer
    function startTimer() {
      timerInterval = setInterval(() => {
        if (expired) return;
        
        const now = Date.now();
        const endTime = parseInt(localStorage.getItem('zhark_end_time_' + inviteId));
        timeLeft = Math.max(0, Math.floor((endTime - now) / 1000));
        
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          expireInvite();
        }
        
        // Aumentar urg√™ncia nos √∫ltimos 60 segundos
        if (timeLeft <= 60) {
          document.getElementById('mainTimer').style.animation = 'pulse 0.5s infinite';
        }
        
        // Aumentar urg√™ncia nos √∫ltimos 30 segundos
        if (timeLeft <= 30) {
          document.getElementById('mainTimer').style.animation = 'pulse 0.3s infinite';
          document.body.style.animation = 'shake 0.2s infinite';
        }
        
        // √öltimos 10 segundos - efeito de desespero
        if (timeLeft <= 10) {
          document.getElementById('mainTimer').style.animation = 'pulse 0.2s infinite';
          document.body.style.animation = 'shake 0.1s infinite';
        }
      }, 1000);
    }
    
    // Atualizar displays do timer
    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      document.getElementById('floatTimer').textContent = timeString;
      document.getElementById('mainTimer').textContent = timeString;
      document.getElementById('smallTimer').textContent = timeString;
      document.getElementById('modalTimer').textContent = timeString;
    }
    
    // Lidar com visibilidade da p√°gina
    function handleVisibilityChange() {
      if (document.hidden) {
        hiddenStartTime = Date.now();
        
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = setInterval(() => {
            if (expired) return;
            
            const now = Date.now();
            const endTime = parseInt(localStorage.getItem('zhark_end_time_' + inviteId));
            
            // Penalidade: tempo passa 3x mais r√°pido quando minimizado
            const penalty = Math.floor((now - hiddenStartTime) / 333); // 0.33 segundos reais = 1 segundo de penalidade
            const newEndTime = endTime - (penalty * 1000);
            
            localStorage.setItem('zhark_end_time_' + inviteId, newEndTime.toString());
            
            timeLeft = Math.max(0, Math.floor((newEndTime - now) / 1000));
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
              expireInvite();
            }
          }, 200); // Verifica a cada 200ms quando minimizado
        }
      } else {
        if (hiddenStartTime) {
          const hiddenDuration = Date.now() - hiddenStartTime;
          
          if (!expired) {
            const penalty = Math.floor(hiddenDuration / 1500); // 1.5 segundos reais = 1 segundo de penalidade
            const endTime = parseInt(localStorage.getItem('zhark_end_time_' + inviteId));
            const newEndTime = endTime - (penalty * 1000);
            
            localStorage.setItem('zhark_end_time_' + inviteId, newEndTime.toString());
            
            if (newEndTime <= Date.now()) {
              expireInvite();
            }
          }
          
          hiddenStartTime = null;
        }
        
        if (timerInterval) {
          clearInterval(timerInterval);
          startTimer();
        }
      }
    }
    
    // Expirar convite permanentemente
    function expireInvite() {
      if (expired) return;
      
      expired = true;
      clearInterval(timerInterval);
      
      // BLOQUEAR PERMANENTEMENTE este link
      localStorage.setItem('zhark_permanent_block_' + inviteId, 'true');
      
      // Limpar timers espec√≠ficos
      localStorage.removeItem('zhark_end_time_' + inviteId);
      localStorage.removeItem('zhark_start_time_' + inviteId);
      
      // Efeito visual de expira√ß√£o
      document.body.classList.add('expired');
      document.body.style.animation = 'crumble 2s forwards';
      
      // Desativar bot√£o
      const acceptBtn = document.getElementById('acceptBtn');
      acceptBtn.disabled = true;
      acceptBtn.style.background = '#222';
      acceptBtn.style.color = '#444';
      acceptBtn.style.cursor = 'not-allowed';
      acceptBtn.onclick = null;
      acceptBtn.textContent = 'CONVITE EXPIRADO';
      
      // Mostrar tela de expirado ap√≥s efeito
      setTimeout(() => {
        showExpired();
      }, 1500);
    }
    
    // Mostrar tela de expirado
    function showExpired() {
      document.getElementById('expiredScreen').style.display = 'flex';
      
      // Adicionar m√∫sica de fundo sombria (apenas som)
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      if (audioContext) {
        setTimeout(() => playSadSound(audioContext), 500);
      }
      
      // Redirecionar para p√°gina bloqueada ap√≥s 30 segundos
      setTimeout(() => {
        document.body.innerHTML = `
          <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #000; color: #222; text-align: center; font-family: 'Cinzel', serif;">
            <div>
              <div style="font-size: 3rem; letter-spacing: 10px; margin-bottom: 30px; opacity: 0.1;">ZHARK</div>
              <div style="font-size: 1rem; letter-spacing: 3px; color: #333; margin-bottom: 20px;">ESTE LINK EST√Å PERMANENTEMENTE BLOQUEADO</div>
              <div style="font-size: 0.8rem; color: #444; letter-spacing: 2px;">
                Solicite um novo convite a um membro ZHARK
              </div>
            </div>
          </div>
        `;
      }, 30000);
    }
    
    // Mostrar expirado imediatamente (link j√° bloqueado)
    function showExpiredImmediately() {
      document.body.classList.add('expired');
      setTimeout(() => {
        document.getElementById('expiredScreen').style.display = 'flex';
      }, 500);
    }
    
    // Mostrar mensagem se j√° aceitou
    function showAlreadyAccepted() {
      document.body.innerHTML = `
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #000; color: #C9A93A; text-align: center; font-family: 'Cinzel', serif; padding: 20px;">
          <div>
            <div style="font-size: 3rem; letter-spacing: 10px; margin-bottom: 30px;">ZHARK</div>
            <div style="font-size: 1.2rem; margin-bottom: 20px; color: #C9A93A;">
              Voc√™ j√° utilizou este convite.
            </div>
            <div style="font-size: 0.9rem; color: rgba(201, 169, 58, 0.7); line-height: 1.6;">
              Cada convite ZHARK √© √∫nico e de uso √∫nico.
              <br>
              Para convidar algu√©m, gere um novo convite pelo aplicativo.
            </div>
          </div>
        </div>
      `;
    }
    
    // Som triste (som sintetizado)
    function playSadSound(audioContext) {
      try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.setValueAtTime(130.81, audioContext.currentTime); // C3
        oscillator.frequency.setValueAtTime(123.47, audioContext.currentTime + 0.5); // B2
        oscillator.frequency.setValueAtTime(116.54, audioContext.currentTime + 1); // A#2
        oscillator.frequency.setValueAtTime(110.00, audioContext.currentTime + 1.5); // A2
        
        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 2);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 2);
      } catch (e) {
        console.log("Som n√£o suportado");
      }
    }
    
    // Prevenir sa√≠da da p√°gina
    function handleBeforeUnload(e) {
      if (!expired && timeLeft > 0) {
        e.preventDefault();
        e.returnValue = 'Se voc√™ sair agora, perder√° permanentemente seu convite para a ZHARK.';
      }
    }
    
    // Modal de acesso
    function showAccessModal() {
      if (expired) return;
      document.getElementById('accessModal').style.display = 'flex';
    }
    
    function closeModal() {
      document.getElementById('accessModal').style.display = 'none';
    }
    
    // Processar acesso (aceitar convite)
    function proceedAccess(choice) {
      if (expired) return;
      
      // Marcar como aceito permanentemente
      localStorage.setItem('zhark_accepted_' + inviteId, 'true');
      localStorage.setItem('zhark_accepted_time', Date.now().toString());
      
      clearInterval(timerInterval);
      
      const device = detectDevice();
      let message = '';
      let url = '';
      
      if (choice === 'android') {
        url = 'https://zhark-society.com/download/app.apk';
        message = 'üéâ CONVITE ACEITO!\n\nC√≥digo de acesso: ZHARK-' + inviteId.slice(0, 8).toUpperCase() + '\n\nRedirecionando para download...';
      } else if (choice === 'ios') {
        url = 'https://apps.apple.com/app/zhark-society/id1234567890';
        message = 'üéâ CONVITE ACEITO!\n\nC√≥digo de acesso: ZHARK-' + inviteId.slice(0, 8).toUpperCase() + '\n\nAbrindo App Store...';
      } else {
        message = 'üìß Instru√ß√µes de acesso enviadas.\n\nC√≥digo: ZHARK-' + inviteId.slice(0, 8).toUpperCase() + '\n\nVerifique seu email.';
      }
      
      alert(message);
      
      if (url && ((choice === 'android' && device === 'android') || (choice === 'ios' && device === 'ios'))) {
        setTimeout(() => {
          window.location.href = url;
        }, 1500);
      } else if (choice !== 'desktop') {
        showQRCode(choice);
      }
      
      closeModal();
    }
    
    // Detectar dispositivo
    function detectDevice() {
      const ua = navigator.userAgent;
      if (/Android/i.test(ua)) return 'android';
      if (/iPad|iPhone|iPod/i.test(ua)) return 'ios';
      return 'desktop';
    }
    
    // Mostrar QR code
    function showQRCode(type) {
      const qrDiv = document.createElement('div');
      qrDiv.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.95);
        z-index: 4000;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
      `;
      
      const code = 'ZHARK-' + inviteId.slice(0, 8).toUpperCase();
      
      qrDiv.innerHTML = `
        <div style="text-align: center; padding: 40px; border: 1px solid #C9A93A; max-width: 320px; background: #111;">
          <div style="font-size: 1.2rem; margin-bottom: 20px; color: #C9A93A;">USE SEU CELULAR</div>
          <div style="width: 200px; height: 200px; margin: 20px auto; background: #222; display: flex; align-items: center; justify-content: center; border: 1px solid #333; color: #C9A93A; font-family: monospace;">
            ${code}
          </div>
          <div style="margin: 20px 0; color: #C9A93A; font-family: monospace; font-size: 1.1rem;">
            ${code}
          </div>
          <div style="font-size: 0.9rem; color: #666; margin-bottom: 20px;">
            Escaneie ou insira este c√≥digo no app ZHARK
          </div>
          <button onclick="this.parentElement.parentElement.remove()" style="background: #C9A93A; color: black; border: none; padding: 12px 30px; cursor: pointer; font-family: inherit;">
            FECHAR
          </button>
        </div>
      `;
      
      document.body.appendChild(qrDiv);
    }
    
    // Inicializar ao carregar
    window.onload = function() {
      init();
      
      // Fechar modal ao clicar fora
      window.onclick = function(event) {
        if (event.target.id === 'accessModal') closeModal();
      };
    };
  </script>
</body>
</html>