<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZHARK ‚Äî Convite Limitado</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    @font-face {
      font-family: 'Wellfleet-Regular';
      src: url('https://fonts.gstatic.com/s/wellfleet/v18/nuF7D_LfQJb3VYgX6eyT42aLDhO2HA.woff2') format('woff2');
    }
    
    :root {
      --primary-black: #000000;
      --accent-gold: #C9A93A;
      --pure-white: #FFFFFF;
      --warning-red: #B22222;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Wellfleet-Regular', 'Cinzel', serif;
      background: var(--pure-white);
      color: var(--primary-black);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    
    /* Container principal */
    .invite-container {
      max-width: 480px;
      padding: 50px 40px;
      position: relative;
      z-index: 2;
      text-align: center;
      border: 3px solid var(--primary-black);
      margin: 20px;
    }
    
    /* Logo */
    .zhark-logo {
      font-family: 'Wellfleet-Regular', 'Cinzel', serif;
      font-size: 4rem;
      letter-spacing: 15px;
      color: var(--primary-black);
      margin-bottom: 10px;
      text-transform: uppercase;
    }
    
    /* Linha divis√≥ria */
    .divider {
      width: 80px;
      height: 2px;
      background: var(--accent-gold);
      margin: 25px auto;
    }
    
    /* Mensagem principal */
    .main-message {
      font-size: 1.3rem;
      line-height: 1.5;
      margin: 30px 0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    /* Timer principal */
    .main-timer {
      font-size: 3.5rem;
      color: var(--warning-red);
      font-weight: bold;
      margin: 30px 0;
      font-family: monospace;
      letter-spacing: 5px;
      animation: pulse 1s infinite;
    }
    
    /* Selo */
    .seal {
      border: 2px solid var(--primary-black);
      padding: 12px 25px;
      display: inline-block;
      margin: 20px 0;
      font-size: 0.9rem;
      letter-spacing: 3px;
      text-transform: uppercase;
    }
    
    /* Bot√£o */
    .accept-btn {
      background: var(--primary-black);
      color: var(--pure-white);
      border: none;
      padding: 22px 50px;
      font-size: 1.1rem;
      font-weight: bold;
      letter-spacing: 3px;
      cursor: pointer;
      margin: 30px 0 15px;
      text-transform: uppercase;
      font-family: inherit;
      width: 100%;
      transition: all 0.3s;
    }
    
    .accept-btn:hover {
      background: var(--accent-gold);
      color: var(--primary-black);
    }
    
    .small-text {
      font-size: 0.8rem;
      color: rgba(0, 0, 0, 0.5);
      letter-spacing: 1px;
      margin-top: 10px;
    }
    
    /* Footer */
    .footer {
      margin-top: 40px;
      font-size: 0.7rem;
      color: rgba(0, 0, 0, 0.4);
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    
    /* Timer flutuante */
    .timer-float {
      position: fixed;
      top: 15px;
      right: 15px;
      background: var(--warning-red);
      color: white;
      padding: 10px 15px;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 4px;
      font-family: monospace;
      z-index: 1000;
      box-shadow: 0 3px 10px rgba(178, 34, 34, 0.3);
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.98);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-box {
      background: var(--pure-white);
      border: 3px solid var(--primary-black);
      padding: 40px 30px;
      max-width: 400px;
      text-align: center;
      margin: 20px;
    }
    
    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      color: var(--primary-black);
      cursor: pointer;
    }
    
    .modal-title {
      font-size: 1.4rem;
      margin-bottom: 25px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    
    .access-option {
      border: 1px solid rgba(0, 0, 0, 0.1);
      padding: 18px;
      margin: 12px 0;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    
    .access-option:hover {
      border-color: var(--primary-black);
    }
    
    .option-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    /* Tela de expirado */
    .expired-screen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 3000;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
    }
    
    .expired-content {
      padding: 50px 40px;
      max-width: 500px;
    }
    
    .expired-title {
      font-size: 2.5rem;
      color: var(--warning-red);
      margin-bottom: 30px;
      text-transform: uppercase;
      letter-spacing: 3px;
    }
    
    .expired-message {
      font-size: 1.2rem;
      line-height: 1.6;
      margin: 25px 0;
      color: #ccc;
    }
    
    /* Anima√ß√µes */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }
    
    /* Responsivo */
    @media (max-width: 768px) {
      .invite-container {
        padding: 40px 20px;
        margin: 15px;
      }
      
      .zhark-logo {
        font-size: 3rem;
        letter-spacing: 10px;
      }
      
      .main-timer {
        font-size: 2.5rem;
      }
      
      .accept-btn {
        padding: 20px 40px;
        font-size: 1rem;
      }
      
      .timer-float {
        top: 10px;
        right: 10px;
        font-size: 1rem;
        padding: 8px 12px;
      }
    }
    
    @media (max-width: 480px) {
      .zhark-logo {
        font-size: 2.5rem;
        letter-spacing: 8px;
      }
      
      .main-timer {
        font-size: 2rem;
      }
    }
  </style>
</head>

<body>
  <!-- Timer flutuante -->
  <div class="timer-float" id="floatTimer">10:00</div>
  
  <!-- Convite -->
  <div class="invite-container">
    <div class="zhark-logo">ZHARK</div>
    
    <div class="divider"></div>
    
    <div class="main-message">
      SEU CONVITE CHEGOU
    </div>
    
    <div class="seal">
      ACESSO CONCEDIDO
    </div>
    
    <div class="main-timer" id="mainTimer">
      10:00
    </div>
    
    <div class="main-message">
      VOC√ä AGORA PERTENCE AOS
      <br>
      <span style="color: var(--warning-red); font-size: 1.4rem;">0,7% SELECIONADOS</span>
    </div>
    
    <button class="accept-btn" id="acceptBtn" onclick="showAccessModal()">
      ACEITAR
    </button>
    
    <div class="small-text">
      Este convite expira em <span id="smallTimer">10:00</span>
    </div>
    
    <div class="footer">
      ZHARK SOCIETY ¬© 2026
    </div>
  </div>
  
  <!-- Modal de acesso -->
  <div class="modal" id="accessModal">
    <div class="modal-box">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <div class="modal-title">COMO VOC√ä PREFERE ENTRAR?</div>
      
      <div class="access-option" onclick="proceedAccess('android')">
        <div class="option-title">ANDROID</div>
        <div>Baixar aplicativo ZHARK</div>
      </div>
      
      <div class="access-option" onclick="proceedAccess('ios')">
        <div class="option-title">IPHONE</div>
        <div>Abrir na App Store</div>
      </div>
      
      <div class="access-option" onclick="proceedAccess('desktop')">
        <div class="option-title">OUTRO DISPOSITIVO</div>
        <div>Receber instru√ß√µes</div>
      </div>
      
      <div style="margin-top: 20px; font-size: 0.9rem; color: var(--warning-red);">
        ‚è∞ Tempo restante: <span id="modalTimer">09:45</span>
      </div>
    </div>
  </div>
  
  <!-- Tela de tempo esgotado -->
  <div class="expired-screen" id="expiredScreen">
    <div class="expired-content">
      <div class="expired-title">TEMPO ESGOTADO</div>
      <div class="expired-message">
        Seu convite para a ZHARK expirou.
        <br>
        Esta oportunidade n√£o estar√° dispon√≠vel novamente.
      </div>
      <div style="margin-top: 30px; font-size: 0.9rem; color: #888;">
        A p√°gina ser√° desativada em breve
      </div>
    </div>
  </div>
  
  <script>
    // Configura√ß√µes
    const TOTAL_TIME = 600; // 10 minutos em segundos
    let timeLeft = TOTAL_TIME;
    let timerInterval = null;
    let expired = false;
    let hiddenStartTime = null;
    
    // Inicializar
    function init() {
      // Verificar se j√° tem tempo guardado
      const savedEndTime = localStorage.getItem('zhark_end_time');
      const savedStartTime = localStorage.getItem('zhark_start_time');
      
      if (savedEndTime && savedStartTime) {
        const now = Date.now();
        const endTime = parseInt(savedEndTime);
        
        if (now >= endTime) {
          // J√° expirou
          showExpired();
          return;
        } else {
          // Continuar contagem
          timeLeft = Math.floor((endTime - now) / 1000);
        }
      } else {
        // Novo convite
        const endTime = Date.now() + (TOTAL_TIME * 1000);
        localStorage.setItem('zhark_end_time', endTime.toString());
        localStorage.setItem('zhark_start_time', Date.now().toString());
      }
      
      // Iniciar timer
      startTimer();
      
      // Configurar detec√ß√£o de p√°gina oculta
      document.addEventListener('visibilitychange', handleVisibilityChange);
      
      // Prevenir sa√≠da
      window.addEventListener('beforeunload', handleBeforeUnload);
    }
    
    // Iniciar timer
    function startTimer() {
      timerInterval = setInterval(() => {
        if (expired) return;
        
        const now = Date.now();
        const endTime = parseInt(localStorage.getItem('zhark_end_time'));
        timeLeft = Math.max(0, Math.floor((endTime - now) / 1000));
        
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          expireInvite();
        }
        
        // Aumentar urg√™ncia nos √∫ltimos 60 segundos
        if (timeLeft <= 60) {
          document.getElementById('mainTimer').style.animation = 'pulse 0.5s infinite';
        }
        
        // Aumentar urg√™ncia nos √∫ltimos 30 segundos
        if (timeLeft <= 30) {
          document.getElementById('mainTimer').style.animation = 'pulse 0.3s infinite';
          document.getElementById('mainTimer').style.animation = 'shake 0.2s infinite';
        }
      }, 1000);
    }
    
    // Atualizar displays do timer
    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      document.getElementById('floatTimer').textContent = timeString;
      document.getElementById('mainTimer').textContent = timeString;
      document.getElementById('smallTimer').textContent = timeString;
      document.getElementById('modalTimer').textContent = timeString;
    }
    
    // Lidar com visibilidade da p√°gina
    function handleVisibilityChange() {
      if (document.hidden) {
        // P√°gina minimizada - marcar tempo
        hiddenStartTime = Date.now();
        
        // Acelerar timer enquanto minimizado
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = setInterval(() => {
            if (expired) return;
            
            const now = Date.now();
            const endTime = parseInt(localStorage.getItem('zhark_end_time'));
            
            // Penalidade: tempo passa 2x mais r√°pido
            const penalty = Math.floor((now - hiddenStartTime) / 500); // 0.5 segundos reais = 1 segundo de penalidade
            const newEndTime = endTime - (penalty * 1000);
            
            localStorage.setItem('zhark_end_time', newEndTime.toString());
            
            timeLeft = Math.max(0, Math.floor((newEndTime - now) / 1000));
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
              expireInvite();
            }
          }, 300); // Verifica a cada 300ms
        }
      } else {
        // P√°gina voltou ao foco
        if (hiddenStartTime) {
          const hiddenDuration = Date.now() - hiddenStartTime;
          
          // Aplicar penalidade final
          if (!expired) {
            const penalty = Math.floor(hiddenDuration / 2000); // 2 segundos reais = 1 segundo de penalidade
            const endTime = parseInt(localStorage.getItem('zhark_end_time'));
            const newEndTime = endTime - (penalty * 1000);
            
            localStorage.setItem('zhark_end_time', newEndTime.toString());
            
            if (newEndTime <= Date.now()) {
              expireInvite();
            }
          }
          
          hiddenStartTime = null;
        }
        
        // Restaurar timer normal
        if (timerInterval) {
          clearInterval(timerInterval);
          startTimer();
        }
      }
    }
    
    // Expirar convite
    function expireInvite() {
      if (expired) return;
      
      expired = true;
      clearInterval(timerInterval);
      
      // Limpar localStorage
      localStorage.removeItem('zhark_end_time');
      localStorage.removeItem('zhark_start_time');
      
      // Desativar bot√£o
      const acceptBtn = document.getElementById('acceptBtn');
      acceptBtn.disabled = true;
      acceptBtn.style.background = '#444';
      acceptBtn.style.color = '#666';
      acceptBtn.style.cursor = 'not-allowed';
      acceptBtn.onclick = null;
      
      // Mostrar tela de expirado
      setTimeout(() => {
        showExpired();
      }, 1000);
    }
    
    // Mostrar tela de expirado
    function showExpired() {
      document.getElementById('expiredScreen').style.display = 'flex';
      
      // Redirecionar ap√≥s 10 segundos
      setTimeout(() => {
        document.body.innerHTML = `
          <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #000; color: #333; text-align: center; font-family: sans-serif;">
            <div>
              <div style="font-size: 2rem; margin-bottom: 20px; letter-spacing: 5px;">ZHARK</div>
              <div style="font-size: 1rem; letter-spacing: 2px;">CONVITE EXPIRADO</div>
            </div>
          </div>
        `;
      }, 10000);
    }
    
    // Prevenir sa√≠da da p√°gina
    function handleBeforeUnload(e) {
      if (!expired && timeLeft > 0) {
        e.preventDefault();
        e.returnValue = 'Se voc√™ sair agora, perder√° seu convite para a ZHARK.';
      }
    }
    
    // Modal de acesso
    function showAccessModal() {
      if (expired) return;
      document.getElementById('accessModal').style.display = 'flex';
    }
    
    function closeModal() {
      document.getElementById('accessModal').style.display = 'none';
    }
    
    // Processar acesso
    function proceedAccess(choice) {
      if (expired) return;
      
      // Salvar aceita√ß√£o
      localStorage.setItem('zhark_accepted', 'true');
      clearInterval(timerInterval);
      
      const device = detectDevice();
      let message = '';
      let url = '';
      
      if (choice === 'android') {
        url = 'https://zhark-society.com/download/app.apk';
        message = 'üì± Baixando ZHARK para Android...\n\nC√≥digo: ZHARK-' + Date.now().toString().slice(-6);
      } else if (choice === 'ios') {
        url = 'https://apps.apple.com/app/zhark-society/id1234567890';
        message = 'üì± Abrindo App Store...\n\nC√≥digo: ZHARK-' + Date.now().toString().slice(-6);
      } else {
        message = 'üìß Instru√ß√µes enviadas para seu email.';
      }
      
      alert(message);
      
      if (url && ((choice === 'android' && device === 'android') || (choice === 'ios' && device === 'ios'))) {
        setTimeout(() => {
          window.location.href = url;
        }, 1000);
      } else if (choice !== 'desktop') {
        showQRCode(choice);
      }
      
      closeModal();
    }
    
    // Detectar dispositivo
    function detectDevice() {
      const ua = navigator.userAgent;
      if (/Android/i.test(ua)) return 'android';
      if (/iPad|iPhone|iPod/i.test(ua)) return 'ios';
      return 'desktop';
    }
    
    // Mostrar QR code
    function showQRCode(type) {
      const qrDiv = document.createElement('div');
      qrDiv.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        z-index: 4000;
        display: flex;
        justify-content: center;
        align-items: center;
      `;
      
      qrDiv.innerHTML = `
        <div style="text-align: center; padding: 30px; border: 2px solid black; max-width: 300px;">
          <div style="font-size: 1.2rem; margin-bottom: 20px;">USE SEU CELULAR</div>
          <div style="width: 200px; height: 200px; margin: 20px auto; background: #f5f5f5; display: flex; align-items: center; justify-content: center; border: 1px solid #ccc;">
            [QR CODE]
          </div>
          <div style="margin: 20px 0; font-family: monospace; background: black; color: #C9A93A; padding: 10px;">
            ZHARK-${Date.now().toString().slice(-6)}
          </div>
          <button onclick="this.parentElement.parentElement.remove()" style="background: black; color: white; border: none; padding: 12px 30px; cursor: pointer;">
            FECHAR
          </button>
        </div>
      `;
      
      document.body.appendChild(qrDiv);
    }
    
    // Inicializar ao carregar
    window.onload = function() {
      init();
      
      // Fechar modal ao clicar fora
      window.onclick = function(event) {
        if (event.target.id === 'accessModal') closeModal();
      };
    };
  </script>
</body>
</html>